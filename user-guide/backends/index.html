
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.2, mkdocs-material-1.6.1">
    
    
      
        <title>Backends - Beam Documentation</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    

      <link rel="stylesheet" href="../../assets/stylesheets/application-4d0d3f2fbf.css">
      
    
<link rel="stylesheet" type="text/css" href="/css/beam.css"/>

    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../theme/css/beam.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Beam Documentation" class="md-logo md-header-nav__button">
            <img src="../../img/logo.svg" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  User Guide
                </span>
              
            
            Backends
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/tathougies/beam" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      tathougies/beam
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../img/logo.svg">
      </i>
    
    Beam Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/tathougies/beam" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      tathougies/beam
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/tutorial1/" title="Part 1" class="md-nav__link">
      Part 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/tutorial2/" title="Part 2" class="md-nav__link">
      Part 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tutorials/tutorial3/" title="Part 3" class="md-nav__link">
      Part 3
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../models/" title="Models" class="md-nav__link">
      Models
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../databases/" title="Databases" class="md-nav__link">
      Databases
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Backends
      </label>
    
    <a href="./" title="Backends" class="md-nav__link md-nav__link--active">
      Backends
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-to-a-database" title="Connecting to a database" class="md-nav__link">
    Connecting to a database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inserting-data" title="Inserting data" class="md-nav__link">
    Inserting data
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../expressions/" title="Expressions" class="md-nav__link">
      Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Queries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Queries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/basic/" title="Basic Queries" class="md-nav__link">
      Basic Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/select/" title="More complex SELECTs" class="md-nav__link">
      More complex SELECTs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/ordering/" title="Ordering" class="md-nav__link">
      Ordering
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/relationships/" title="Relationships" class="md-nav__link">
      Relationships
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/aggregates/" title="Aggregates" class="md-nav__link">
      Aggregates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/combining-queries/" title="Combining queries" class="md-nav__link">
      Combining queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/window-functions/" title="Window functions" class="md-nav__link">
      Window functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../queries/advanced-features/" title="Advanced features" class="md-nav__link">
      Advanced features
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extensibility/" title="Custom queries" class="md-nav__link">
      Custom queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-7" type="checkbox" id="nav-4-7">
    
    <label class="md-nav__link" for="nav-4-7">
      Data Manipulation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-7">
        Data Manipulation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../manipulation/insert/" title="INSERT" class="md-nav__link">
      INSERT
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manipulation/update/" title="UPDATE" class="md-nav__link">
      UPDATE
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../manipulation/delete/" title="DELETE" class="md-nav__link">
      DELETE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Schema management
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Schema management
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../schema-guide/migrations/" title="The Migrations Framework" class="md-nav__link">
      The Migrations Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../schema-guide/tool/" title="The beam-migrate tool" class="md-nav__link">
      The beam-migrate tool
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../schema-guide/supported/" title="Supported migrations" class="md-nav__link">
      Supported migrations
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Backends
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Backends
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="beam-postgres/" title="beam-postgres" class="md-nav__link">
      beam-postgres
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="beam-sqlite/" title="beam-sqlite" class="md-nav__link">
      beam-sqlite
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-backends/" title="Writing a Custom Backend" class="md-nav__link">
      Writing a Custom Backend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      About
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/compatibility/" title="Compatibility Matrix" class="md-nav__link">
      Compatibility Matrix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/license/" title="License" class="md-nav__link">
      License
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../about/release-notes/" title="Release Notes" class="md-nav__link">
      Release Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connecting-to-a-database" title="Connecting to a database" class="md-nav__link">
    Connecting to a database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inserting-data" title="Inserting data" class="md-nav__link">
    Inserting data
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Backends</h1>
                
                <p>Beam is backend-agnostic and doesn't provide any means to connect to a
database. Beam backend libraries usually use well-used Haskell
libraries to provide database connectivity. For example, the
<code>beam-sqlite</code> backend uses the <code>sqlite-simple</code> backend.</p>
<p>Beam distinguishes each backend via type indexes. Each backend defines
a type that is used to enable backend-specific behavior. For example,
the <code>beam-sqlite</code> backend ships with the <code>Sqlite</code> type that is used to
distinguish sqlite specific constructs with generic or other
backend-specific ones.</p>
<p>Each backend can have one or more 'syntaxes', which are particular
ways to query the database. While the <code>beam-core</code> library ships with a
standard ANSI SQL builder, few real-world database implementations
fully follow the standard. Most backends use their own custom syntax
type. Internally, beam uses a finally-tagless representation for
syntax trees that allow straightforward construction against any
backend.</p>
<p>Beam offers backend-generic functions for the most common operations
against databases. These functions are meant to fit the lowest common
denominator. For example, no control is offered over streaming results
from SELECT statements. While these backend-generic functions are
useful for ad-hoc querying and development, it is wisest to use
backend-specific functions in production for maximum control. Refer to
backend-specific documentation for more information.</p>
<p>For our examples, we will use the <code>beam-sqlite</code> backend and demonstrate
usage of the beam standard query functions.</p>
<h2 id="connecting-to-a-database">Connecting to a database</h2>
<p>Okay, so we can print out a SQL statement, but how do we execute it against a
database? Beam provides a convenient <code>MonadBeam</code> type class that allows us to
write queries in a backend agnostic manner. This is good-enough for most
applications and preserves portability across databases. However, <code>MonadBeam</code>
does not support features specific to each backend, nor does it guarantee the
highest-performance. Most backends provide additional methods to query a
database, and you should prefer these if you've committed to a particular
backend. For tutorial purposes, we will use the <code>beam-sqlite</code> backend.</p>
<p>First, install <code>beam-sqlite</code> with <code>cabal</code> or <code>stack</code>:</p>
<div class="codehilite"><pre><span></span>$ cabal install beam-sqlite
<span class="c1"># or</span>
$ stack install beam-sqlite
</pre></div>


<p>Now, load <code>beam-sqlite</code> in GHCi. </p>
<div class="codehilite"><pre><span></span><span class="n">Prelude</span><span class="o">&gt;</span> <span class="kn">import</span> <span class="nn">Database.Beam.Sqlite</span>
<span class="n">Prelude</span> <span class="n">Database</span><span class="o">.</span><span class="n">Beam</span><span class="o">.</span><span class="n">Sqlite</span><span class="o">&gt;</span> 
</pre></div>


<p>Now, in another terminal, load the example database provided. </p>
<div class="codehilite"><pre><span></span>$ sqlite3 basics.db &lt; beam-sqlite/examples/basics.sql
</pre></div>


<p>Now, back in GHCi, we can create a connection to this database.</p>
<div class="codehilite"><pre><span></span>Prelude Database.Beam.Sqlite<span class="o">&gt;</span> basics <span class="o">&lt;-</span> open <span class="s">&quot;basics.db&quot;</span>
Prelude Database.Beam.Sqlite<span class="o">&gt;</span> withDatabase basics <span class="o">$</span> runSelectReturningList <span class="p">(</span>select <span class="p">(</span>all_ <span class="p">(</span>persons exampleDb<span class="p">)))</span>
<span class="p">[</span> <span class="m">..</span> <span class="p">]</span>
</pre></div>


<p>The <code>runSelectReturningList</code> function takes a <code>SqlSelect</code> for the given syntax
and returns the results via a list.</p>
<p>Voilà! We've successfully created our first query and run it against an example
database. We have now seen the major functionalities of the beam library. In the
next section we'll explore more advanced querying and using relationships
between tables.</p>
<h2 id="inserting-data">Inserting data</h2>
<p>First, let's connect to a sqlite database, and create our schema. The
<code>beam-core</code> does not offer any support for the SQL DDL language. There
is a separate core library <code>beam-migrate</code> that offers complete support
for ANSI-standard SQL DDL operations, as well as tools to manipulate
database schemas. See the section on migrations for more information.</p>
<p>For our example, we will simply issue a <code>CREATE TABLE</code> command
directly against the database using <code>sqlite-simple</code> functionality:</p>
<div class="codehilite"><pre><span></span>Prelude Schema&gt; execute_ conn &quot;CREATE TABLE persons ( first_name TEXT NOT NULL, last_name TEXT NOT NULL, age INT NOT NULL, PRIMARY KEY(first_name, last_name) )&quot;
</pre></div>


<p>Now we can insert some data into our database. Beam ships with a
function <code>withDatabase</code>, with the following signature:</p>
<div class="codehilite"><pre><span></span><span class="nf">withDatabase</span> <span class="ow">::</span> <span class="kt">MonadBeam</span> <span class="n">syntax</span> <span class="n">be</span> <span class="n">hdl</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="n">hdl</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="n">a</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="n">a</span>
</pre></div>


<p><code>MonadBeam</code> is a type class that relates a particular SQL syntax (<code>syntax</code>) to a
backend (<code>be</code>), command monad (<code>m</code>), and database handle (<code>hdl</code>) type. Inside
the <code>m</code> monad, we can execute data query and manipulation commands. The <code>hdl</code>
type is usually the type of the connection in the underlying backend library.</p>
<p>For example, <code>beam-sqlite</code> uses the <code>sqlite-simple</code> library, so its handle type
is <code>Connection</code> from <code>Database.SQLite.Simple</code>.</p>
<p>Let's insert some data into our database. We are going to use the <code>runInsert</code>
function from <code>MonadBeam</code>. INSERTs are discussed in more detail in
the <a href="../manipulation/insert/">data manipulation guide</a>.</p>
<div class="codehilite"><pre><span></span>Prelude Schema&gt; :{
Prelude Schema| withDatabase conn $ do
Prelude Schema|   runInsert $ insert (persons exampleDb) $
Prelude Schema|               insertValues [ Person &quot;Bob&quot; &quot;Smith&quot; 50
Prelude Schema|                            , Person &quot;Alice&quot; &quot;Wong&quot; 55
Prelude Schema|                            , Person &quot;John&quot; &quot;Quincy&quot; 30 ]
Prelude Schema| :}
</pre></div>


<p>The <code>runInsert</code> function has the type signature</p>
<div class="codehilite"><pre><span></span><span class="nf">runInsert</span> <span class="ow">::</span> <span class="kt">MonadBeam</span> <span class="n">syntax</span> <span class="n">be</span> <span class="n">hdl</span> <span class="n">m</span> <span class="ow">=&gt;</span> <span class="kt">SqlInsert</span> <span class="n">syntax</span> <span class="ow">-&gt;</span> <span class="n">m</span> <span class="nb">()</span>
</pre></div>


<p><code>SqlInsert syntax</code> represents a SQL <code>INSERT</code> command in the given
<code>syntax</code>. We construct this value using the <code>insert</code> function from
<code>Database.Beam.Query</code>.</p>
<div class="codehilite"><pre><span></span><span class="nf">insert</span> <span class="ow">::</span> <span class="kt">IsSql92InsertSyntax</span> <span class="n">syntax</span> <span class="ow">=&gt;</span>
          <span class="kt">DatabaseEntity</span> <span class="n">be</span> <span class="n">db</span> <span class="p">(</span><span class="kt">TableEntity</span> <span class="n">table</span><span class="p">)</span>
       <span class="ow">-&gt;</span> <span class="kt">Sql92InsertValuesSyntax</span> <span class="n">syntax</span>
       <span class="ow">-&gt;</span> <span class="kt">SqlInsert</span> <span class="n">syntax</span>
</pre></div>


<p>Intuitively, <code>insert</code> takes a database table descriptor and some
values (particular to the given syntax) and returns a statement to
insert these values. <code>Sql92InsertValuesSyntax syntax</code> always
implements the <code>IsSql92InsertValuesSyntax</code> typeclass, which is where
we get the <code>insertValues</code> function from. <code>IsSql92InsertValuesSyntax</code>
also defines the <code>insertSelect</code> function for inserting values from the
result of a <code>SELECT</code> statement. Other backends may provide other ways
of specifying the source of values.</p>
<p>Now, we can query the database, using the <code>runSelect</code> function. Like <code>runInsert</code>
and <code>insert</code>, we use the <code>select</code> function to construct a value of type
<code>SqlSelect syntax</code>, which can be run inside <code>MonadBeam</code>.</p>
<p>We can use the <code>withDatabaseDebug</code> function to install a hook that beam will
call with every SQL command it is about to run. In the following example, beam
will print its query to stdout via <code>putStrLn</code>. You can use this functionality to hook beam in to a logging framework.</p>
<div class="codehilite"><pre><span></span>Prelude Schema&gt; withDatabaseDebug putStrLn conn $ runSelect (select (all_ (persons exampleDb)))
[ Person { personFirstName = &quot;Bob&quot;, personLastName=&quot;Smith&quot;, personAge=50 }, ... ]
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../databases/" title="Databases" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Databases
              </span>
            </div>
          </a>
        
        
          <a href="../expressions/" title="Expressions" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Expressions
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    

      <script src="../../assets/javascripts/application-6b599127bc.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
<script type="text/javascript" language="javascript"  src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script type="text/javascript" language="javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript" language="javascript">
 $(document.body).tab();
 $(".nav-item:first-child").tab("show");
</script>

    
      
    
  </body>
</html>